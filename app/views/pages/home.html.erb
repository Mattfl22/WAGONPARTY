<%# Home page %>

<div class="banner-landing">
  <%= video_tag "pexel-video-test.mp4", autoplay: :autoplay, loop: :loop, muted: :muted, class: "banner-video" %>
  <h1 class="banner-h1">Welcome to the Wagon Party</h1>
  <%# add the search engine to filter results according to input %>
  <%= form_tag wagons_path, :class=>"banner-form", method: :get do %>
    <%= text_field_tag :query,
      params[:query],
      placeholder: "Find a party"%>
      <%= submit_tag "Let's Go!", class: "btn-submit" %>
  <% end %>

  <%# Add the button 'random trip' %>
  <%= link_to "I'm flexible", wagons_path, class: "home-random-button" %>
</div>

<div class="container">
  <h2 class="home-h2 mb-3">Our wagons, your rules 🚃</h2>
</div>
<div class="home-features text-center">
  <div class="feature-card feature-card-1">
    <div class="feature-image">
      <%= image_tag("feature-1.svg")%>
    </div>
    <div class="feature-description">
      <div class="feature-description-title">
        <h3><strong>Rule #1:</strong> Don't waste any minute of partying</h3>
      </div>
      <div class="feature-description-text">
        <p> Arriving to your destination later than everyone? 🥺 Think your friends are all going to be drunk before you? 😭 Don't you worry, we gotcha! Embarking on the Wagon Party will ensure you are at least as drunk as the people you are joining... 🥳 </p>
      </div>
    </div>
  </div>

  <div class="feature-card feature-card-2">
    <div class="feature-description">
      <div class="feature-description-title">
        <h3><strong>Rule #2:</strong> What happens in the Wagon Party stays in the Wagon Party</h3>
      </div>
      <div class="feature-description-text">
        <p>Puked on the blanket? 🤮 Had sex with the stripper? 🍆 Trashed the wagon? 🧨
        Your secret is ours... 😉 <br>
        <em>Disclaimer:</em> Beware that if you fall off the train, we do not take responsibility and will not be held accountable. Funeral costs will be at your charge.
       </p>
      </div>
    </div>
    <div class="feature-image">
      <%= image_tag("feature-2.svg")%>
    </div>
  </div>

  <div class="feature-card feature-card-3">
    <div class="feature-image">
      <%= image_tag("feature-3.svg")%>
    </div>
    <div class="feature-description">
      <div class="feature-description-title">
        <h3><strong>Rule #3:</strong> Relax, and we will take care of it </h3>
      </div>
      <div class="feature-description-text">
        <p>We know you are busy, we know you want a careless journey 😎 Everything is taken care of by our staff 💂‍♂️ You just need to relax and be ready to party ! 🕺💃 </p>
      </div>
    </div>
  </div>

<div class="container">
  <h2 class="home-h2 mb-3 text-left">Our top recommendations 🕺</h2>
  <div class="home-cards-container">
    <% @wagons = Wagon.all.sample(3) %>
    <% @wagons.each do |wagon|%>
      <div class="home-card" style="width: 20rem;">
          <div class="rounded">
            <% if wagon.photo.key %>
                <%= cl_image_tag wagon.photo.key, crop: :fill, style:'height: 150px; width: 20rem; object-fit:cover; border-radius: 4px' %>
              <% else %>
                <img src="https://images.unsplash.com/photo-1599766431396-2405fdfcf5e4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80", style='height: 150px; width: 150px; object-fit:cover; border-radius: 4px'/>
              <% end %>
          </div>
          <div class="card-body">
          <h5 class="home-card-title"> <strong><%= wagon.name %></strong></h5>
          <p class="home-card-text"><%= wagon.description %></p>
          <p> <%= link_to "Get the rave going", wagon_path(wagon), class: "btn-card" %></a>
        </div>
      </div>
    <% end %>
  </div>
</div>
